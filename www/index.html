<!doctype html>
<html>
  <head>
    <title></title>
    <meta charset="utf-8"/>
    <meta name="format-detection" content="telephone=no"/>
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width"/>
	<meta http-equiv="Content-Security-Policy" content="default-src 'self'">
    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <!-- build:css(.) styles/vendor.css -->
    <!-- bower:css -->
    <link rel="stylesheet" href="libs/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="libs/angular-bootstrap/ui-bootstrap-csp.css" />
    <link rel="stylesheet" href="libs/angularjs-toaster/toaster.min.css" />
	<link rel="stylesheet" href="libs/angular-carousel-master/angular-carousel.min.css" />
	<link rel="stylesheet" href="libs/angular-ngprogress/ngProgress.css" />
	
    <!-- endbower -->
    <!-- endbuild -->
    <!-- build:css(.tmp) styles/main.css -->
    <link rel="stylesheet" href="styles/app.css">

	<link rel="stylesheet" href="styles/grilla.css">
	
	<link rel="stylesheet" href="styles/login.css">

	<link rel="stylesheet" href="styles/lukas.css">	
	
	<link rel="stylesheet" href="styles/lukas_small.css" />
	
	<link rel="stylesheet" href="styles/font-awesome.min.css">
    <!-- endbuild -->
    
    	<style>
	[ng\:cloak], [ng-cloak], [data-ng-cloak], [x-ng-cloak], .ng-cloak, .x-ng-cloak {
		display: none !important;
	}

	.nav-tabs > li > div {
		margin-right: 2px;
		line-height: 1.42857143;
		border: 1px solid transparent;
		border-radius: 4px 4px 0 0;
	}
	.nav-tabs > li > div:hover {
		border-color: #eee #eee #ddd;
	}
	.nav-tabs > li.active > div, .nav-tabs > li.active > div:hover {
		color: #555;
		cursor: default;
		background-color: #f8f8f8;
		border: 1px solid #ddd;
		border-bottom-color: transparent;
	}
	.nav > li > div {
		position: relative;
		display: block;
		padding: 10px 15px;
	}
	.nav > li > div:hover {
		background-color: #eee;
	}
	.uib-tab > div {
		color: #337ab7;
		cursor: pointer;
	}
	</style>
  </head>
  <body ng-app="APP" onload="onDeviceReady()">

	<toaster-container toaster-options="{'position-class': 'toast-center'}"></toaster-container>
	
	<div style="display:none" id="divBackground" ng-controller="backgroundController"></div>
	
	<div ng-show="banConexion == false && eventoLogueado" style="display: none; background-color: #A72424; color: white;  height: 50px; position: fixed; width: 100%; z-index: 100;">
		<img src="./images/logo_off.png" alt="NO HAY IMAGEN" style="max-height: 30px; float: left; margin: 9px; margin-right: 15px;" class="img-responsive">
		<div style="font-size: 11px; padding-top: 15px;"><b>Lukas necesita de internet para despertar!</b></div>
	</div>	
	
	<div id="content" class="app-content" role="main">
		<div ng-view class="view"></div>
	</div>

	<footer id="footer" class="app-footer  ng-cloak" role="footer"  ng-if="eventoLogueado">
		<div class="container">
			<nav class="navbar navbar-default navbar-fixed-bottom" id="barra_inferior" role="navigation">
				<div id="div_img_pendiente" style="float:left; color:#000; margin: 8px;">
					<a ng-href="#/multimedias" class="btn btn-bordo">Tus fotos</a>
				</div>
				<div style="float:right;">
					<a href="javascript:window.open('http://www.lukas.alberione.com.ar/','_self');"><span style="float: right;margin-top: 15px;color: #fff;font-size: 15px;margin-right: 12px;">Lukas</span><img src="./images/logo.png" alt="NO HAY IMAGEN" style="max-height: 30px; margin: 10px; margin-left: 20px; float:right" class="img-responsive"></a>
				</div>	
			</nav>
		</div>
	</footer>

    <!-- OL debe cargarse antes que todos
    <script src="libs/openlayers3/ol.js"></script>  -->
	
    <script type="text/javascript" src="cordova.js"></script>
    <!-- bower:js -->
    <script src="libs/jquery/dist/jquery.min.js"></script>
    <script src="libs/angular/angular.js"></script>
    <script src="libs/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="libs/angular-bootstrap/ui-bootstrap.min.js"></script>
    <script src="libs/angular-cookies/angular-cookies.min.js"></script>
    <script src="libs/angular-jwt/dist/angular-jwt.min.js"></script>
    <script src="libs/a0-angular-storage/dist/angular-storage.js"></script>
    <script src="libs/angular-resource/angular-resource.min.js"></script>
	<script src="libs/angular-ngprogress/ngprogress.js"></script>
    <script src="libs/angular-route/angular-route.min.js"></script>
    <script src="libs/angular-sanitize/angular-sanitize.min.js"></script>
    <script src="libs/angular-touch/angular-touch.min.js"></script>
	<script src="libs/angular-carousel-master/angular-carousel.min.js"></script>
    <script src="libs/angular-md5/angular-md5.min.js"></script>
    <script src="libs/angularjs-toaster/toaster.min.js"></script>
	<script src="libs/ui-listview-master/ui-listView.min.js"></script>
    <script src="i18n/angular-locale_es-ar.js"></script>
	
	<script src="libs/angular-googlemaps/lodash.min.js"></script>
	<script src="libs/angular-googlemaps/angular-simple-logger.min.js"></script>
	<script src="libs/angular-googlemaps/angular-google-maps.min.js"></script>	
	<script src='//maps.googleapis.com/maps/api/js?sensor=false'></script>
	
	<script src="libs/ngPinchZoom/ng-pinch-zoom.min.js"></script>
    <!-- endbower -->
    <!-- endbuild -->

	<!-- build:js({.tmp,app}) scripts/scripts.js -->
	
	<script src="scripts/app.js"></script>
	
	<script src="scripts/filters/listbox.js"></script>
	<script src="scripts/filters/date.js"></script>
	
	<script src="scripts/controllers/login.js"></script>
	<script src="scripts/controllers/main.js"></script>
	<script src="scripts/controllers/mesas.js"></script>
	<script src="scripts/controllers/timelines.js"></script>
	<script src="scripts/controllers/multimedias.js"></script>
	<script src="scripts/controllers/background.js"></script>

	<script src="scripts/services/autenticacion.js"></script>
	<script src="scripts/services/filtros.js"></script>
	<script src="scripts/services/eventos.js"></script>
	<script src="scripts/services/mesas.js"></script>
	<script src="scripts/services/multimedias.js"></script>
	<script src="scripts/services/markers.js"></script>
	<script src="scripts/services/timelines.js"></script>
	<script src="scripts/services/comentarios.js"></script>
	<script src="scripts/services/likes.js"></script>
	<script src="scripts/services/usuarios.js"></script>
	<script src="scripts/services/database.js"></script>
	
	<script src="scripts/directives/scroll_infinito.js"></script>
	<!-- endbuild -->
	
	<!-- definimos el back button -->
	<script>
		function onDeviceReady() {
			document.addEventListener("backbutton", onBackKeyDown, false);
			var promiseCon = angular.element(document.getElementById('divBackground')).scope().prepararDB();
			var promiseCon = angular.element(document.getElementById('divBackground')).scope().verificiarConexion();
			promiseCon.then(function(pReturn) {
				//
			}, function(reason) {
			  alert(reason);
			});							
		}
		
		var pageActual = 'main';
		var pagePadreModal = '';
		var functionCloseModal = '';
		
		function onBackKeyDown(){
		   if(pageActual == 'main'){
				navigator.app.exitApp();	
			}else if(pageActual == 'modal'){
				angular.element($('[ng-view]')).scope().cerrarModal();
				pageActual = pagePadreModal;
			}else {
				navigator.app.backHistory()
			}		
		}		
	</script>
	<!-- -->
</body>
</html>
